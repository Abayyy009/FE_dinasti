<div class="w-full mx-auto py-8" id="projectDetailBudgetCashflow">
  <!-- Header -->
  <div class="flex flex-wrap items-start justify-between mb-4 gap-4">
    <div>
      <h1 id="formTitle" class="text-2xl font-bold mb-1">TAMBAH SALES</h1>
      <nav class="text-gray-500 text-sm flex items-center flex-wrap gap-1">
        <span>Home</span>
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
        <span>Penjualan</span>
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
        <span class="font-medium">Faktur</span>
      </nav>
    </div>

    <!-- Tombol-tombol sejajar -->
    <div class="flex flex-wrap items-center gap-2">
      <button onclick="submitInvoice()" class="bg-green-700 hover:bg-green-800 text-white px-4 py-2 rounded text-sm">ğŸ’¾
        Submit</button>
      <button onclick="updateInvoice()"
        class="bg-yellow-700 hover:bg-yellow-800 text-white px-4 py-2 rounded text-sm hidden">ğŸ”„ Update</button>
      <button onclick="printInvoice(detail_id)"
        class="bg-gray-700 hover:bg-gray-800 text-white px-4 py-2 rounded text-sm">ğŸ“„ Download PDF</button>

      <button onclick="loadModuleContent('sales')" class="bg-gray-300 text-sm px-4 py-2 rounded">â¬…ï¸ Back</button>
    </div>
  </div>

  <!-- Form + Ringkasan -->
  <div class="grid grid-cols-1 md:grid-cols-10 gap-6">
    <!-- Form 70% -->
    <div class="md:col-span-7 bg-white p-6 rounded shadow space-y-6">
      <div class="flex items-center justify-between border-b pb-4">
        <div>
          <h2 class="text-xl font-bold">ğŸ§¾ Tambah Sales</h2>
        </div>
        <img src="../../assets/img/cropped-logo.png" class="h-12" />
      </div>


      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

        <div>
          <label class="block text-sm font-medium">Tanggal</label>
          <input type="date" id="tanggal" name="tanggal" class="w-full border px-3 py-2 rounded" />
        </div>

        <!-- Sales Type -->
        <div>
          <label class="block text-sm font-medium">Sales Type</label>
          <select id="type_id" name="type_id" onclick="loadSalesType()" class="w-full border px-3 py-2 rounded">
            <option value="">Pilih Tipe</option>
          </select>
        </div>

        <!-- No Quotation -->
        <div>
          <label class="block text-sm font-medium">No Quotation</label>
          <input type="text" id="no_qtn" name="no_qtn" class="w-full border px-3 py-2 rounded bg-gray-100" readonly />
        </div>

        <!-- Nama Project -->
        <div>
          <label class="block text-sm font-medium">Nama Project</label>
          <input type="text" id="project_name" name="project_name" class="w-full border px-3 py-2 rounded" />
        </div>

        <!-- Client -->

        <div class="relative">
          <label class="block text-sm font-medium">Client</label>
          <input type="text" id="client" name="client" class="w-full border px-3 py-2 rounded" autocomplete="off"
            oninput="filterclientSuggestions()" />
          <input type="hidden" id="client_id" />
          <ul id="clientSuggestions"
            class="absolute z-10 w-full bg-white border rounded mt-1 text-sm shadow hidden max-h-48 overflow-y-auto">
          </ul>
        </div>
        <!-- Nominal Kontrak -->

        <div class="hidden">
          <label class="block text-sm font-medium">Nominal Kontrak</label>
          <input type="text" id="contract_amount" class="formatRupiah w-full border px-3 py-2 rounded bg-gray-100"
            readonly value="0" />
        </div>



        <div class="hidden">
          <label class="block text-sm font-medium">PPN 11% (Rp)</label>
          <input type="text" id="ppn" class="formatRupiah w-full border px-3 py-2 rounded bg-gray-100" readonly
            value="0" />
        </div>

        <div class="hidden">
          <label class="hidden block text-sm font-medium">Total</label>
          <input type="text" id="total" class="formatRupiah w-full border px-3 py-2 rounded bg-gray-100 font-bold"
            readonly value="0" />
        </div>

        <input type="hidden" id="shipping" name="shipping" value="0" />

        <!-- PPN Persen (Hidden or readonly default 11%) -->
        <input type="hidden" id="ppn_persen" value="11" />

        <!-- Status -->
        <div>
          <label class="block text-sm font-medium">Status</label>
          <select id="status" name="status" onclick="loadStatusOptions()" onchange="updateRevisionNumber()"
            class="w-full border px-3 py-2 rounded" value="On Going">
            <option value="">-- Pilih Status --</option>
          </select>
        </div>


        <div>
          <label class="block text-sm font-medium">Revision Number</label>
          <input type="text" id="revision_number" name="revision_number"
            class="w-full border px-3 py-2 rounded bg-gray-100" readonly />
        </div>


        <!-- Hidden user_id -->
        <input type="hidden" name="user_id" value="100" />
      </div>


      <div>
        <h3 class="text-sm font-semibold mb-2">ğŸ“¦ Daftar Item</h3>
        <div class="overflow-auto border rounded">
          <table class="w-full text-sm">
            <thead class="bg-gray-100">
              <tr>
                <th class="px-3 py-2 border text-left">Produk</th>
                <th class="px-3 py-2 border text-left">Deksripsi</th>
                <th class="px-3 py-2 border text-right">Unit</th>
                <th class="px-3 py-2 border text-right">Qty</th>
                <th class="px-3 py-2 border text-right">Harga</th>
                <th class="px-3 py-2 border text-right">Subtotal</th>
                <th class="px-3 py-2 border text-center">Aksi</th>
              </tr>
            </thead>
            <tbody id="tabelItem" class="bg-white"></tbody>
          </table>
        </div>
        <button onclick="tambahItem()" class="mt-2 px-4 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700">+
          Tambah Item</button>
      </div>


      <!-- Discount -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
          <label class="block text-sm font-medium">Diskon (Rp)</label>
          <input type="text" id="discount" class="formatRupiah w-full border px-3 py-2 rounded" value="0"
            oninput="calculateInvoiceTotals()" />
        </div>
        <div>
          <label class="block text-sm font-medium">ğŸ“ Catatan</label>
          <textarea id="catatan" rows="3" class="w-full border rounded px-3 py-2"></textarea>
        </div>
        <div>
          <label class="block text-sm font-medium">ğŸ“Œ Syarat & Ketentuan</label>
          <textarea id="syarat_ketentuan" rows="3" class="w-full border rounded px-3 py-2"></textarea>
        </div>
      </div>

      <div class="mt-4">
        <label class="block text-sm font-medium">ğŸ’° Term of Payment</label>
        <textarea id="term_pembayaran" rows="2" class="w-full border rounded px-3 py-2"></textarea>
      </div>




      <div class="text-right pt-4 border-t">

      </div>
    </div>

    <!-- Ringkasan 30% -->
    <div class="md:col-span-3 bg-gray-50 p-4 rounded shadow space-y-4">
      <h4 class="font-semibold">ğŸ’¡ Ringkasan</h4>
      <div class="text-sm space-y-2">
        <p><span class="text-gray-500">Subtotal:</span> <span id="contract_amount_display" class="float-right">0</span>
        </p>
        <p><span class="text-gray-500">Diskon:</span> <span id="diskon" class="float-right">0</span></p>
        <p><span class="text-gray-500">Pajak (11%):</span> <span id="ppn_display" class="float-right">0</span></p>
        <hr />
        <p class="font-bold text-green-600">Total: <span id="total_display" class="float-right">0</span></p>
        </p>
        <hr />
        <div class="md:col-span-2">
          <label class="block text-sm font-medium">File Pendukung</label>
          <input type="file" id="file" name="file" class="w-full border px-3 py-2 rounded" />
        </div>

      </div>
      <!-- List Pembayaran -->
      <div id="listPembayaran" class="space-y-2 mt-3"></div>

    </div>
  </div>
</div>